var C=Object.defineProperty;var D=(n,t,e)=>t in n?C(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var y=(n,t,e)=>D(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();class w{constructor(t,e,o){y(this,"x");y(this,"y");y(this,"color");this.x=t,this.y=e,this.color=o}inbounds(t,e,o){return Array.isArray(t)&&o>=0&&o<t.length&&Array.isArray(t[o])&&e>=0&&e<t[o].length}move_to(t,e,o){this.inbounds(t,e,o)&&t[o][e]===null&&(t[this.y][this.x]=null,this.x=e,this.y=o,t[o][e]=this)}}class E extends w{constructor(t,e,o){super(t,e,o)}}class S extends E{constructor(t,e,o){super(t,e,o)}update(t){if(this.inbounds(t,this.x,this.y+1)&&t[this.y+1][this.x]===null)this.move_to(t,this.x,this.y+1);else{const e=[];if(this.inbounds(t,this.x-1,this.y+1)&&t[this.y+1][this.x-1]===null&&e.push([-1,1]),this.inbounds(t,this.x+1,this.y+1)&&t[this.y+1][this.x+1]===null&&e.push([1,1]),e.length>0){const[o,s]=e[Math.floor(Math.random()*e.length)];this.move_to(t,this.x+o,this.y+s)}}}}class q extends S{constructor(t,e){super(t,e,"goldenrod")}}let m=!1,f=null,p=null;const F=5,N=2;function B(n,t,e,o,s){function r(i){if(i instanceof MouseEvent)return K(i,n,t);if(i instanceof TouchEvent&&i.touches.length>0){const c=i.touches[0],L=n.getBoundingClientRect();return{x:Math.floor((c.clientX-L.left)/t),y:Math.floor((c.clientY-L.top)/t)}}return null}function l(i){i.preventDefault(),m=!0;const c=r(i);c&&(f=c,M(f,e,o,t,s)),p||(p=setInterval(()=>{m&&f&&M(f,e,o,t,s)},16))}function u(){m=!1,f=null,p&&(clearInterval(p),p=null)}function a(i){if(i.preventDefault(),!m)return;const c=r(i);c&&(f=c,M(f,e,o,t,s))}n.addEventListener("mousedown",l),n.addEventListener("mouseup",u),n.addEventListener("mouseleave",u),n.addEventListener("mousemove",a),n.addEventListener("touchstart",l),n.addEventListener("touchend",u),n.addEventListener("touchcancel",u),n.addEventListener("touchmove",a)}function K(n,t,e){const o=t.getBoundingClientRect();return{x:Math.floor((n.clientX-o.left)/e),y:Math.floor((n.clientY-o.top)/e)}}function M(n,t,e,o,s){for(let r=0;r<F;r++){const l=Math.random()*2*Math.PI,u=Math.random()*N,a=Math.round(n.x+Math.cos(l)*u),i=Math.round(n.y+Math.sin(l)*u);a>=0&&a<t&&i>=0&&i<e&&s(a,i)}}const d=document.querySelector("canvas"),A=d.getContext("2d"),O=512,R=512,h=4;d.width=O;d.height=R;const v=R/h,g=O/h,x=Array.from({length:v},()=>Array(g).fill(null));function Y(){A.clearRect(0,0,d.width,d.height);for(let n=0;n<v;n++)for(let t=0;t<g;t++){const e=x[n][t];e&&(A.fillStyle=e.color,A.fillRect(t*h,n*h,h,h))}}function b(){for(let n=v-1;n>=0;n--)for(let t=0;t<g;t++){const e=x[n][t];e&&typeof e.update=="function"&&e.update(x)}}function T(n,t){x[t][n]=new q(n,t)}B(d,h,g,v,T);function P(){b(),b(),Y(),requestAnimationFrame(P)}P();
